// js/myths.js

// 1. Массив данных для всех мифов, извлеченных из myths.html
// Каждый объект содержит массив контента, который может состоять из текста, изображений и видео.
const mythsData = [
    {
        title: "Миф 1. Марс ярко‑красный",
        content: [
            {
                type: "text",
                value: "Марс традиционно называют Красной планетой, и в фильмах его пейзажи чаще всего показывают через фильтр именно этого цвета. Однако на самом деле он совсем не такой. Если вы посмотрите на фотографии марсоходов Curiosity и Sojourner, то увидите, что пустыня там окрашена в жёлто‑серые оттенки."
            },
            {
                type: "text",
                value: "Марс действительно выглядит красным с орбиты из‑за богатой окисленным железом пыли — в его атмосфере буквально летает ржавчина."
            },
            {
                type: "text",
                value: "Но если рассматривать планету с поверхности, а не из космоса, она будет желтоватой."
            },
            {
                type: "image",
                src: "./Images/Поверхность%20Марса%20со%20следами%20Curiosity.jpg",
                alt: "Поверхность Марса со следами Curiosity. Изображение: NASA / JPL‑Caltech / MSSS"
            },
            {
                type: "text",
                value: "Кроме того, на Марсе есть места коричневого, зеленоватого, золотистого или даже почти чёрного цвета — всё зависит от того, какие минералы там преобладают. Небо на этой планете тоже не красное, а серое, желтоватое или голубое в разное время суток."
            }
        ],
        linkHref: "https://ui.adsabs.harvard.edu/abs/2002JGRE..107.5127R/abstract"
    },
    {
        title: "Миф 2. Марс горячий",
        content: [
            {
                type: "text",
                value: "Это заблуждение связано с предыдущим. Обычно у людей красный цвет ассоциируется с высокой температурой, поэтому многие искренне полагают, что на Марсе очень жарко и из‑за этого он побагровел."
            },
            {
                type: "text",
                value: "Тот же Фрэнк Герберт, например, явно ориентировался на Марс, описывая свою Дюну: пустынная оранжевая планета с белыми полярными шапками, жители которой страдают от жары. Но реальный Марс совершенно не похож на Арракис."
            },
            {
                type: "text",
                value: "В действительности средняя температура здесь равняется −63 °С — довольно прохладно, мягко говоря."
            },
            {
                type: "image",
                src: "./Images/Заполненный%20льдом%2082‑километровый%20кратер%20Королёва%20на%20Марсе.jpg",
                alt: "Заполненный льдом 82‑километровый кратер Королёва на Марсе"
            },
            {
                type: "text",
                value: "Жарче всего на Марсе летом на экваторе — температура может достигать аж 27 °C, а однажды были зафиксированы рекордные 35 °C. Зимой же может ударить мороз: от −80 до −125 °С. А на полюсе все −153 °C."
            },
            {type: "text", value: "Так что считать Марс жаркой пустыней, красным подобием Сахары, совершенно неверно."}
        ],
        linkHref: "https://science.nasa.gov/mission/mars-exploration-rovers-spirit-and-opportunity/"
    },
    {
        title: "Миф 3. На Марсе бывают мощные ураганы и пыльные бури",
        content: [
            {
                type: "text",
                value: "Ещё одна особенность, которой наделяют Красную планету фантасты и которой она в действительности не обладает, — мощные ветра. В том же «Марсианине» пыльная буря оказалась настолько сильной, что перевернула многотонный взлётно‑посадочный модуль космического корабля."
            },
            {
                type: "text",
                value: "Однако на самом деле атмосфера здесь слишком разрежена, чтобы в ней могли случаться такие бури. И самый страшный ураган человек будет ощущать как лёгкий ветерок, способный разве что волосы взъерошить."
            },
            {
                type: "text",
                value: "Пожалуйста, если вы читаете это, стоя на Марсе, не снимайте шлем скафандра ради проверки! Это небезопасно."
            },
            {
                type: "text",
                value: "Пыльные бури на Красной планете действительно случаются, и они приносят исследователям NASA немало неприятностей. Но не потому, что переворачивают марсоходы и уносят их, а потому, что засыпают песком солнечные панели, и это может привести к обесточиванию аппарата."
            }
        ],
        linkHref: "https://www.nasa.gov/feature/goddard/the-fact-and-fiction-of-martian-dust-storms"
    },
    {
        title: "Миф 4. На поверхности Марса есть каналы",
        content: [
            {
                type: "image",
                src: "Images/Карта%20Марса%20по%20Фламмариону%20и%20Антониади,%20на%20которой%20изображены%20марсианские%20каналы.jpg",
                alt: "Карта Марса по Фламмариону и Антониади, на которой изображены марсианские каналы"
            },
            {
                type: "text",
                value: "В конце XIX — начале XX века учёные считали, что по поверхности Марса разбросаны некие каналы, возможно, использовавшися для орошения. Одни считали, что это доказывает существование на Марсе развитой цивилизации, способной создавать продвинутые гидротехнические сооружения. Другие объясняли появление «каналов» естественными причинами — рельеф, мол, такой."
            },
            {
                type: "text",
                value: "Однако позднее, в 1907 году, учёные отказались от идеи, что на Марсе эти гидротехнические сооружения есть, объяснив их существование оптической иллюзией."
            },
            {
                type: "text",
                value: "Полученные через пару лет первые фотографии подтвердили эту версию. А прилетевший в 1965 году зонд Mariner 4, передавший близкие снимки поверхности планеты, окончательно похоронил теорию «марсианских каналов»."
            }
        ],
        linkHref: "https://adsabs.harvard.edu//full/2010JBAA..120..240D/0000241.000.html"
    },
    {
        title: "Миф 5. Иногда Марс на небе становится больше, чем полная Луна",
        content: [
            {
                type: "text",
                value: "Периодически — в основном в августе — в интернете можно увидеть картинку, на которой Марс запечатлён рядом с Луной, и они выглядят практически идентичными по размеру. Это объясняется тем, что Красная планета время от времени встаёт в противостояние с Землёй, приближаясь к ней на минимальное расстояние."
            },
            {
                type: "image",
                src: "./Images/Картинка,%20обычно%20сопровождающая%20рассказы%20о%20«Марсе%20размером%20с%20Луну.jpg",
                alt: "Картинка, обычно сопровождающая рассказы о «Марсе размером с Луну"
            },
            {
                type: "text",
                value: "Но несмотря на то, что Марс на самом деле вдвое больше Луны, с Земли он выглядит в 500 раз меньше нашего естественного спутника."
            },
            {
                type: "text",
                value: "Даже при рекордном сближении Земли и Красной планеты последняя смотрится просто как яркая точка, которую уж никак нельзя спутать с Луной."
            },
            {
                type: "text",
                value: "И да, упоминаемая в этой байке информация о том, что Красная планета и Земля сближаются только раз в 60 000 лет, тоже неправда. В реальности противостояние планет случается каждые два года."
            }
        ],
        linkHref: "http://spider.seds.org/spider/Mars/Add/whenwasmarsclose.pdf"
    },
    {
        title: "Миф 6. На Марсе есть лицо",
        content: [
            {
                type: "text",
                value: "В 1976 году космические аппараты Viking 1 и Viking 2 сделали серию снимков марсианского региона, которому дали название Кидония. На одном из них обнаружилось нечто, напоминающее огромное человеческое лицо."
            },
            {type: "image", src: "./Images/Лицо%20на%20Марсе.jpg", alt: "Лицо на Марсе"},
            {
                type: "text",
                value: "Множество паранаучных изданий сразу заявили, что это творение потерянной высокоразвитой цивилизации, и окрестили выпуклость «марсианским сфинксом»."
            },
            {
                type: "text",
                value: "Правда, когда космические корабли Mars Global Surveyor, Mars Reconnaissance Orbiter и Mars Express сделали новые снимки Кидонии, стало совершенно очевидно, что никакого лица там нет."
            },
            {
                type: "text",
                value: "Но это не мешает фанатам уфологии периодически вспоминать о существовании на Марсе «сфинкса»."
            }
        ],
        linkHref: "https://lifehacker.ru/parejdoliya/"
    },
    {
        title: "Миф 7. На Марсе была ядерная война",
        content: [
            {
                type: "text",
                value: "Как несложно заметить, условия на Марсе в настоящий момент так себе: радиация и тоненькая бескислородная атмосфера над холодной пустыней. По всей видимости, раньше здесь было поприятнее — вроде как даже имелись океаны и реки. Но потом что‑то случилось, и Красная планета стала такой, как сегодня."
            },
            {
                type: "text",
                value: "Почему это произошло? Ну, большинство учёных полагают, что в так называемый гесперийский период (3,5–2,5 миллиарда лет назад) Марс обладал океанами и плотной атмосферой. Но позже — 700 миллионов лет назад — её сдуло солнечным ветром."
            },
            {type: "text", value: "Вот что бывает, когда забываешь отрастить мощное магнитное поле, как у Земли."},
            {
                type: "image",
                src: "./Images/Атмосфера%20Марса,%20снимок%20зонда%20Viking,%201976%20год.jpg",
                alt: "Атмосфера Марса, снимок зонда Viking, 1976 год"
            },
            {
                type: "text",
                value: "Но существует и другая версия, которой придерживаются фанаты альтернативной науки. Якобы давным‑давно на Марсе жили две высокоразвитые цивилизации, Кидония и Утопия. Что‑то они между собой не поделили, и как давай друг в друга пулять ядерными ракетами, пока не превратили планету в безжизненную пустыню."
            },
            {
                type: "text",
                value: "А потом все благополучно умерли. Поэтому‑де на Марсе высокий уровень радиации и повсюду кратеры — воронки от атомных взрывов."
            },
            {
                type: "text",
                value: "Правда, сторонники этой теории не могут объяснить, почему никаких следов таинственные Кидония и Утопия после себя не оставили. На Земле археологи памятники всяких Древних Египтов невооружённым взглядом находят, а тут целые цивилизации с атомным оружием ни одного захудалого домишки после себя не оставили."
            },
            {
                type: "text",
                value: "Да и кратеры на Марсе имеют куда более очевидное объяснение: атмосфера тонкая, астероиды затормозить не может, вот они и бахают со всей силы. А радиация на Красной планете — результат воздействия на неё космических лучей высоких энергий, а не каких‑то там бомб."
            },
            {
                type: "text",
                value: "В общем, совершенно понятно, что никакой ядерной войны и высокоразвитой цивилизации на Марсе не было — тут бы бактерии хоть какие найти, а о высокоорганизованной жизни и речи не идёт."
            }
        ],
        linkHref: "https://medium.com/the-weird-closet/nuclear-alien-space-wars-a-martian-theory-490a642664f3"
    },
    {
        title: "Миф 8. И если её повторить, Марс снова станет пригодным для жизни",
        content: [
            {
                type: "image",
                src: "Images/AQAKR0gMyOnn886mJXgvjl-T2OIOjW84ZIeZaTB8ZvyWdT_yDWGa_H9Cb6KcwRH1ETYdIJhmTQbNUctUxJI6jeI19a4.webp",
                alt: "Илон Маск предлагает взорвать Марс ядерными бомбами"
            },
            {
                type: "text",
                value: "В 2018 году в интервью американскому комику Стиву Кольберу Илон Маск предложил бахнуть по полярным шапкам Марса ядерными бомбами. Это якобы должно было согреть его, растопить льды, устроить парниковый эффект и создать на поверхности Красной планеты новый океан. А там можно и колонизацию начинать."
            },
            {type: "image", src: "Images/original.jpg", alt: "original"},
            {
                type: "text",
                value: "Вообще, если посмотреть интервью, а не читать его пересказы, можно заметить, что Маск пошутил."
            },
            {
                type: "text",
                value: "Но многие приняли его план за чистую монету и начали спорить, возможно ли сделать планету пригодной для жизни. Учёные из Стэнфорда шутки ради подсчитали, сколько энергии понадобится для превращения марсианских полярных шапок в жидкий океан."
            },
            {type: "image", src: "Images/0_8c76c_57874c9_orig.jpg", alt: "0_8c76c_57874c9_orig"},
            {
                type: "text",
                value: "И результаты неутешительны: даже если одномоментно взорвать весь мировой запас ядерного оружия на Марсе, этого не хватит, чтобы испарить твёрдый углекислый газ на полюсах и создать парниковый эффект в тонкой атмосфере планеты."
            },
            {type: "video", src: "https://www.youtube.com/embed/gV6hP9wpMW8?si=THRQw_X4JvG3kJv"}
        ],
        linkHref: "https://trends.rbc.ru/trends/futurology/602fa0e09a7947edc0bba1c9"
    },
    {
        title: "Миф 9. Кадры с Марса снимают на острове Девон",
        content: [
            {
                type: "text",
                value: "Довольно популярная теория заговора, которая гласит, что NASA не запускала Curiosity, Opportunity и другие роверы на Марс, а вместо этого катает свои аппараты по острову Девон в Канаде, рядом с Гренландией. Это пустынная и холодная земля, покрытая песком и льдом, и она довольно похожа на Красную планету."
            },
            {
                type: "image",
                src: "./Images/Трулавская%20низменность,%20остров%20Девон,%20Нунавут,%20Канада.jpg",
                alt: "Трулавская низменность, остров Девон, Нунавут, Канада"
            },
            {
                type: "text",
                value: "Доказательством скептики считают разнообразные подозрительные объекты, которые то и дело попадают в объективы NASA: выброшенные на берег рыбы, пробегающие игуаны, крысы, паукообразные обезьяны и человеческие тени. Последние, видимо, принадлежат членам съёмочной команды."
            },
            {type: "image", src: "Images/breccia_hills_devon_island-1440x1080.jpg", alt: "Breccia Hills, Devon Island"},
            {
                type: "text",
                value: "Правда, на острове Девон не водятся игуаны и паукообразные обезьяны — климат не тот. Да и простых грызунов там найти довольно затруднительно."
            },
            {
                type: "image",
                src: "Images/haughton_mars_project_devon_island-1440x1080.webp",
                alt: "Haughton Mars Project, Devon Island"
            },
            {
                type: "text",
                value: "В принципе, вы можете посетить это место с помощью Google Earth и посмотреть, правда ли тамошние пейзажи похожи на снимки с Curiosity (вообще разница довольно заметная). Марсоходов там не найти, зато можно нарваться на случайно заплывшего на остров белого медведя."
            },
            {type: "video", src: "https://www.youtube.com/embed/xzyOdH6OlV0?si=4I3OyibYJD50hDEs"}
        ],
        linkHref: "https://canadiangeographic.ca/articles/now-you-can-virtually-explore-mars-on-earth-in-google-street-view/"
    }
];

// 2. Функция для динамической генерации карточек мифов
function generateMyths() {
    const container = document.getElementById('myths-container');
    if (!container) return;
    container.innerHTML = '';

    mythsData.forEach((myth, index) => {
        const colDiv = document.createElement('div');

        // Логика для колонок: если количество карточек нечетное и это последняя, делаем её на всю ширину на средних экранах
        if (mythsData.length % 2 !== 0 && index === mythsData.length - 1) {
            colDiv.className = 'col-12 col-sm-12 col-lg-4';
        } else {
            colDiv.className = 'col-12 col-sm-6 col-lg-4';
        }

        const marsCardDiv = document.createElement('div');
        marsCardDiv.className = 'mars-card d-flex flex-column h-100';

        const h3 = document.createElement('h3');
        h3.textContent = myth.title;
        marsCardDiv.appendChild(h3);

        const p = document.createElement('p');

        // Генерируем контент на основе типа
        myth.content.forEach(contentItem => {
            if (contentItem.type === 'text') {
                const textNode = document.createTextNode(contentItem.value);
                p.appendChild(textNode);
            } else if (contentItem.type === 'image') {
                const img = document.createElement('img');
                img.src = contentItem.src;
                img.alt = contentItem.alt;
                img.className = 'img-fluid my-2';
                p.appendChild(img);
            } else if (contentItem.type === 'video') {
                const videoContainer = document.createElement('div');
                videoContainer.className = 'video-container video-expand';
                const iframe = document.createElement('iframe');
                iframe.src = contentItem.src;
                iframe.title = 'YouTube video player';
                iframe.allow = 'accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share';
                iframe.allowFullscreen = true;
                videoContainer.appendChild(iframe);
                p.appendChild(videoContainer);
            }
        });

        marsCardDiv.appendChild(p);

        if (myth.linkHref) {
            const link = document.createElement('a');
            link.href = myth.linkHref;
            link.target = '_blank';
            link.className = 'mt-auto';
            link.textContent = '...Learn More';
            marsCardDiv.appendChild(link);
        }

        colDiv.appendChild(marsCardDiv);
        container.appendChild(colDiv);
    });
}

// 3. Запускаем функцию, когда страница полностью загружена
document.addEventListener('DOMContentLoaded', generateMyths);